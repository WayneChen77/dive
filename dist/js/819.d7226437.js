"use strict";(self["webpackChunkDive"]=self["webpackChunkDive"]||[]).push([[819],{8819:function(e,t,a){a.r(t),a.d(t,{default:function(){return at}});var s=a(3396),l=a(9242),i=a(7139);const o=e=>((0,s.dD)("data-v-b4324e7a"),e=e(),(0,s.Cn)(),e),d={class:"container UserCarts"},r={class:"title mb-5"},n={"aria-label":"breadcrumb"},c={class:"breadcrumb"},u={class:"breadcrumb-item"},m=o((()=>(0,s._)("li",{class:"breadcrumb-item active","aria-current":"page"},"購物車",-1))),p=o((()=>(0,s._)("hr",null,null,-1))),b={class:"position-relative m-4"},h={class:"progress",style:{height:"5px"}},v={key:0,class:"progress-bar bg-titleblue",role:"progressbar",style:{width:"0%"},"aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"},_={key:1,class:"progress-bar bg-titleblue",role:"progressbar",style:{width:"33%"},"aria-valuenow":"33","aria-valuemin":"0","aria-valuemax":"100"},g=(0,s.uE)('<button type="button" class="position-absolute top-0 translate-middle btn btn-primary rounded-pill btnadj" style="left:0;" data-v-b4324e7a><i class="bi bi-cart2" data-v-b4324e7a></i></button><button type="button" class="position-absolute top-0 translate-middle btn btn-primary rounded-pill btnadj" style="left:33%;" data-v-b4324e7a><i class="bi bi-card-checklist" data-v-b4324e7a></i></button><button type="button" class="position-absolute top-0 translate-middle btn btn-primary rounded-pill btnadj" style="will-change:;left:66%;" data-v-b4324e7a><i class="bi bi-cash-coin" data-v-b4324e7a></i></button><button type="button" class="position-absolute top-0 translate-middle btn btn-primary rounded-pill btnadj" style="left:100%;" data-v-b4324e7a><i class="bi bi-emoji-smile" data-v-b4324e7a></i></button>',4),y={class:"row"},w={class:"col-12 col-sm-8"},f=o((()=>(0,s._)("div",{class:"cartsrwd"},null,-1))),C={class:"col-12 col-md-4"},x={key:0,class:"input-group mt-md-0 mt-3 mb-3 input-group-sm"},k={for:"coupon"},$={class:"input-group-append ms-3"},D=["disabled"],q=o((()=>(0,s._)("span",{class:"mt-3 text-primary"},"迎接假期！輸入： godive ，即享88折優惠！",-1))),V={key:1,class:"col-12 col-md-10 rounded mb-3"},U={class:"accordion w-100",id:"accordionExample"},j={class:"accordion-item"},L=o((()=>(0,s._)("h2",{class:"accordion-header",id:"headingOne"},[(0,s._)("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," 購物車品項 ")],-1))),W={id:"collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},z={class:"accordion-body"},O={class:"col-8"},E={class:"col-4 text-end"},I=o((()=>(0,s._)("hr",null,null,-1))),M={class:"mb-3 pe-2 col-12 col-md-10"},A={class:"border rounded p-0"},R=o((()=>(0,s._)("div",{class:"bg-bgblue rounded-top text-center text-textblue py-3 mb-3"},[(0,s._)("h3",null,"訂單資料")],-1))),F={class:"text-gray mx-3"},H={class:"text-end"},N={key:0,class:"mx-3"},P={class:"text-end"},Y={class:"text-danger mx-3"},Z={class:"text-end"},K={class:"text-end"},S=["disabled"];function T(e,t,a,o,T,X){const B=(0,s.up)("LoadingView"),G=(0,s.up)("router-link"),J=(0,s.up)("CartsItem"),Q=(0,s.up)("CartsForm");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(B,{active:T.isLoading},null,8,["active"]),(0,s._)("div",d,[(0,s._)("div",r,[(0,s._)("nav",n,[(0,s._)("ol",c,[(0,s._)("li",u,[(0,s.Wm)(G,{class:"text-decoration-none",to:"/home"},{default:(0,s.w5)((()=>[(0,s.Uk)("首頁")])),_:1})]),m])]),p,(0,s._)("div",b,[(0,s._)("div",h,[T.sendData?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",v)),T.sendData?((0,s.wg)(),(0,s.iD)("div",_)):(0,s.kq)("",!0)]),g])]),(0,s._)("div",y,[(0,s._)("div",w,[T.sendData?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(J,{key:0,data:T.carts,onReduceCart:X.reduceCart,onAddCart:X.addCart,onRemoveCart:X.removeCartItem,onDeleCart:X.deleteCart,onAdjCart:X.adjCart},null,8,["data","onReduceCart","onAddCart","onRemoveCart","onDeleCart","onAdjCart"])),f]),(0,s._)("div",C,[T.sendData?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",x,[(0,s._)("label",k,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control mb-3","onUpdate:modelValue":t[0]||(t[0]=e=>T.coupon_code=e),placeholder:"請輸入優惠碼"},null,512),[[l.nr,T.coupon_code]])]),(0,s._)("div",$,[(0,s._)("button",{disabled:T.carts.length<1,class:"btn btn-outline-titleblue",type:"button",onClick:t[1]||(t[1]=(...e)=>X.addCouponCode&&X.addCouponCode(...e))}," 套用優惠碼 ",8,D)]),q])),T.sendData?((0,s.wg)(),(0,s.iD)("div",V,[(0,s._)("div",U,[(0,s._)("div",j,[L,(0,s._)("div",W,[(0,s._)("div",z,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(T.carts,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"row",key:e.id},[(0,s._)("div",O,(0,i.zw)(e.product.title),1),(0,s._)("div",E,"X"+(0,i.zw)(e.qty),1),I])))),128))])])])])])):(0,s.kq)("",!0),(0,s._)("div",M,[(0,s._)("div",A,[R,(0,s._)("div",F,[(0,s.Uk)(" 商品金額: "),(0,s._)("p",H,"$"+(0,i.zw)(this.$filters.currency(T.price.total)),1)]),T.price.total!=T.price.final_total?((0,s.wg)(),(0,s.iD)("div",N,[(0,s.Uk)(" 折扣金額: "),(0,s._)("p",P,"$"+(0,i.zw)(this.$filters.currency(T.price.total-T.price.final_total)),1)])):(0,s.kq)("",!0),(0,s._)("div",Y,[(0,s.Uk)(" 總金額: "),(0,s._)("p",Z,"$"+(0,i.zw)(this.$filters.currency(T.price.final_total)),1)]),(0,s._)("div",K,[T.sendData?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-outline-titleblue m-3",type:"button",disabled:T.carts.length<1,onClick:t[2]||(t[2]=e=>T.sendData=!0)}," 送出資料 ",8,S))])])]),T.isMounted?((0,s.wg)(),(0,s.j4)(s.lR,{key:2,to:".cartsrwd",class:"imgtp",disabled:T.isDisabled},[T.sendData?((0,s.wg)(),(0,s.j4)(Q,{key:0})):(0,s.kq)("",!0)],8,["disabled"])):(0,s.kq)("",!0)])])])],64)}const X={class:"row"},B={class:"border"},G={key:0,class:"container mt-4"},J={class:"table table-hover align-middle align-middle"},Q=(0,s._)("thead",null,[(0,s._)("tr",{class:"align-middle text-sm text-gray-400"},[(0,s._)("th",{scope:"col",style:{width:"52%"}},"購物車"),(0,s._)("th",{scope:"col",class:"d-none d-md-table-cell",style:{width:"23%"}},"人數"),(0,s._)("th",{scope:"col",class:"d-none d-md-table-cell",style:{width:"15%"}},"總計"),(0,s._)("th",{scope:"col",class:"d-none d-md-table-cell text-center",style:{width:"10%"}}," 刪除 ")])],-1),ee={class:"d-flex align-items-center flex-column flex-sm-row"},te={class:"d-md-none p-2"},ae=["onClick"],se=(0,s._)("i",{class:"bi bi-trash"},null,-1),le=[se],ie=["src","alt","title"],oe={class:"text-center py-4"},de={class:"h5 fw-bolder"},re={class:"d-md-none"},ne={class:"py-2"},ce=["onUpdate:modelValue","onChange"],ue=(0,s._)("option",{value:"1"},"1人",-1),me=(0,s._)("option",{value:"2"},"2人",-1),pe=(0,s._)("option",{value:"3"},"3人",-1),be=(0,s._)("option",{value:"4"},"4人",-1),he=[ue,me,pe,be],ve={class:"d-none d-md-table-cell text-end align-middle"},_e=["onUpdate:modelValue","onChange"],ge=(0,s._)("option",{value:"1"},"1人",-1),ye=(0,s._)("option",{value:"2"},"2人",-1),we=(0,s._)("option",{value:"3"},"3人",-1),fe=(0,s._)("option",{value:"4"},"4人",-1),Ce=[ge,ye,we,fe],xe={class:"d-none d-md-table-cell text-end h5"},ke={class:"d-none d-md-table-cell text-end"},$e=["onClick"],De=(0,s._)("i",{class:"bi bi-trash"},null,-1),qe=[De],Ve={key:1,class:"container-fluid mt-4"},Ue={class:"text-center"},je=(0,s._)("i",{class:"bi bi-cart4 display-1 fw-bold text-dark"},null,-1),Le=(0,s._)("h3",{class:"p-3"},"目前購物車還沒有商品唷",-1);function We(e,t,a,o,d,r){const n=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("button",{class:"btn btn-outline-titleblue mb-3",type:"button",onClick:t[0]||(t[0]=t=>e.$emit("deleCart"))}," 清空資料 "),(0,s._)("div",X,[(0,s._)("div",B,[d.carts.length>0?((0,s.wg)(),(0,s.iD)("div",G,[(0,s._)("table",J,[Q,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(d.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",ee,[(0,s._)("div",te,[(0,s._)("button",{type:"button",class:"btn d-md-block mx-auto btnClose",onClick:a=>e.$emit("removeCart",t.id)},le,8,ae)]),(0,s._)("img",{class:"productImg w-50 p-1",src:t.product.imageUrl,alt:t.product.title,title:t.product.title},null,8,ie),(0,s._)("div",oe,[(0,s._)("div",de,(0,i.zw)(t.product.title),1),(0,s._)("div",re,[(0,s._)("div",ne,"NT$"+(0,i.zw)(e.$filters.currency(t.total)),1),(0,s.wy)((0,s._)("select",{style:{width:"50vw",padding:"auto"},class:"form-select text-center","onUpdate:modelValue":e=>t.qty=e,"aria-label":"Default select example",onChange:a=>e.$emit("adjCart",t)},he,40,ce),[[l.bM,t.qty,void 0,{number:!0}]])])])]),(0,s._)("td",ve,[(0,s.wy)((0,s._)("select",{class:"form-select px-1","onUpdate:modelValue":e=>t.qty=e,"aria-label":"Default select example",onChange:a=>e.$emit("adjCart",t)},Ce,40,_e),[[l.bM,t.qty,void 0,{number:!0}]])]),(0,s._)("td",xe," NT$"+(0,i.zw)(e.$filters.currency(t.total)),1),(0,s._)("td",ke,[(0,s._)("button",{type:"button",class:"btn d-md-block mx-auto btnClose",onClick:a=>e.$emit("removeCart",t.id)},qe,8,$e)])])))),128))])])])):((0,s.wg)(),(0,s.iD)("div",Ve,[(0,s._)("div",Ue,[je,Le,(0,s.Wm)(n,{to:"/UserProducts",class:"btn btn-outline-titleblue btn-lg mb-5"},{default:(0,s.w5)((()=>[(0,s.Uk)("選購商品")])),_:1})])]))])])],64)}var ze={data(){return{carts:[]}},props:{data:{type:Object},default(){return{}}},emits:["deleCart","addCart","removeCart","reduceCart","adjCart"],watch:{data(){this.carts=this.data}}},Oe=a(89);const Ee=(0,Oe.Z)(ze,[["render",We]]);var Ie=Ee;const Me={class:"row justify-content-center p-md-0 p-3"},Ae=(0,s._)("h3",{class:"text-center fs-3"},"顧客聯絡資料",-1),Re={class:"my-3"},Fe=(0,s._)("label",{for:"name",class:"form-label"},"聯絡人姓名",-1),He={class:"mb-3"},Ne=(0,s._)("label",{for:"email",class:"form-label"},"聯絡人Email",-1),Pe={class:"mb-3"},Ye=(0,s._)("label",{for:"tel",class:"form-label"},"聯絡人電話",-1),Ze={class:"mb-3"},Ke=(0,s._)("label",{for:"address",class:"form-label"},"聯絡人地址",-1),Se={class:"mb-3"},Te=(0,s._)("label",{for:"message",class:"form-label"},"留言",-1),Xe=(0,s._)("div",{class:"text-end mb-3"},[(0,s._)("button",{class:"btn btn-danger"},"送出資料")],-1);function Be(e,t,a,o,d,r){const n=(0,s.up)("FieldView"),c=(0,s.up)("ErrorMessage"),u=(0,s.up)("FormView");return(0,s.wg)(),(0,s.iD)("div",Me,[Ae,(0,s.Wm)(u,{class:"col-md-10 bg-titleblue rounded my-3 text-warning",onSubmit:r.createOrder},{default:(0,s.w5)((({errors:e})=>[(0,s._)("div",Re,[Fe,(0,s.Wm)(n,{id:"name",name:"姓名",type:"text",class:(0,i.C_)(["form-control",{"is-invalid":e["姓名"],"is-valid":!e[0]&&""!=d.form.user.name}]),placeholder:"請輸入聯絡人姓名",rules:r.isName,modelValue:d.form.user.name,"onUpdate:modelValue":t[0]||(t[0]=e=>d.form.user.name=e)},null,8,["class","rules","modelValue"]),(0,s.Wm)(c,{name:"姓名",class:"invalid-feedback"})]),(0,s._)("div",He,[Ne,(0,s.Wm)(n,{id:"email",name:"email",type:"email",class:(0,i.C_)(["form-control",{"is-invalid":e["email"],"is-valid":!e[0]&&""!=d.form.user.email}]),placeholder:"請輸入聯絡人Email",rules:"email|required",modelValue:d.form.user.email,"onUpdate:modelValue":t[1]||(t[1]=e=>d.form.user.email=e)},null,8,["class","modelValue"]),(0,s.Wm)(c,{name:"email",class:"invalid-feedback"})]),(0,s._)("div",Pe,[Ye,(0,s.Wm)(n,{id:"tel",name:"電話",type:"tel",class:(0,i.C_)(["form-control",{"is-invalid":e["電話"],"is-valid":!e[0]&&""!=d.form.user.tel}]),placeholder:"請輸入聯絡人電話",rules:r.isPhone,modelValue:d.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=e=>d.form.user.tel=e)},null,8,["class","rules","modelValue"]),(0,s.Wm)(c,{name:"電話",class:"invalid-feedback"})]),(0,s._)("div",Ze,[Ke,(0,s.Wm)(n,{id:"address",name:"地址",type:"text",class:(0,i.C_)(["form-control",{"is-invalid":e["地址"],"is-valid":!e[0]&&""!=d.form.user.address}]),placeholder:"請輸入聯絡人地址",rules:"required",modelValue:d.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=e=>d.form.user.address=e)},null,8,["class","modelValue"]),(0,s.Wm)(c,{name:"地址",class:"invalid-feedback"})]),(0,s._)("div",Se,[Te,(0,s.wy)((0,s._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=e=>d.form.message=e)},null,512),[[l.nr,d.form.message]])]),Xe])),_:1},8,["onSubmit"])])}a(7658);var Ge={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{isName(e){const t=/^[\u4e00-\u9fa5A-Za-z]{0,}$/;return""===this.form.user.name?"姓名為必填":!!t.test(e)||"需要中文或英文姓名"},isPhone(e){const t=/^(09)[0-9]{8}$/;return""===this.form.user.tel?"電話為必填":!!t.test(e)||"需要正確的電話號碼"},createOrder(){const e="https://vue3-course-api.hexschool.io/api/waynechendive-api/order",t=this.form;this.$http.post(e,{data:t}).then((e=>{this.$emitter.emit("push-cart",{style:"success",title:e.data.message,content:e.data.message}),this.$router.push(`/Order/PayView/${e.data.orderId}`)}))}}};const Je=(0,Oe.Z)(Ge,[["render",Be]]);var Qe=Je,et={data(){return{carts:[],price:{},coupon_code:"",sendData:!1,isload:!1,isLoading:!1,isMounted:!1,isDisabled:!1}},components:{CartsItem:Ie,CartsForm:Qe},mounted(){this.isMounted=!0,window.innerWidth<430&&(this.isDisabled=!0),window.addEventListener("resize",(()=>{console.log(window.screen.width),window.innerWidth<430?this.isDisabled=!0:this.isDisabled=!1})),this.$emitter.on("push-cart",(()=>{this.getusercarts()}))},methods:{reduceCart(e){this.isLoad=!0;const t=`https://vue3-course-api.hexschool.io/api/waynechendive-api/cart/${e.id}`,a={product_id:e.product_id,qty:e.qty-1};this.$http.put(t,{data:a}).then((e=>{this.$emitter.emit("push-cart",{style:"warning",title:e.data.message,content:e.data.message}),console.log(e),this.isLoad=!1,this.getusercarts()}))},addCart(e){this.isLoad=!0;const t=`https://vue3-course-api.hexschool.io/api/waynechendive-api/cart/${e.id}`,a={product_id:e.product_id,qty:e.qty+1};this.$http.put(t,{data:a}).then((e=>{this.$emitter.emit("push-cart",{style:"success",title:e.data.message,content:e.data.message}),console.log(e),this.isLoad=!1,this.getusercarts()}))},adjCart(e){this.isLoad=!0;const t=`https://vue3-course-api.hexschool.io/api/waynechendive-api/cart/${e.id}`,a={product_id:e.product_id,qty:e.qty};this.$http.put(t,{data:a}).then((e=>{this.$emitter.emit("push-cart",{style:"success",title:e.data.message,content:e.data.message}),console.log(e),this.isLoad=!1,this.getusercarts()}))},removeCartItem(e){const t=`https://vue3-course-api.hexschool.io/api/waynechendive-api/cart/${e}`;this.$http.delete(t).then((e=>{this.$emitter.emit("push-cart",{style:"warning",title:e.data.message,content:e.data.message}),this.getusercarts()}))},deleteCart(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/waynechendive-api/carts";this.$http.delete(e).then((e=>{this.isLoading=!1,this.$emitter.emit("push-cart",{style:"danger",title:e.data.message,content:e.data.message}),this.getusercarts()}))},addCouponCode(){const e="https://vue3-course-api.hexschool.io/api/waynechendive-api/coupon",t={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:t}).then((e=>{this.$emitter.emit("push-cart",{style:"info",title:e.data.message,content:e.data.message}),this.getusercarts(),this.isLoading=!1}))},getusercarts(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/waynechendive-api/cart";this.$http.get(e).then((e=>{this.price=e.data.data,this.carts=e.data.data.carts,this.isLoading=!1})).catch((e=>{console.log(e)}))}},created(){this.getusercarts()}};const tt=(0,Oe.Z)(et,[["render",T],["__scopeId","data-v-b4324e7a"]]);var at=tt}}]);
//# sourceMappingURL=819.d7226437.js.map