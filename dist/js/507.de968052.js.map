{"version":3,"file":"js/507.de968052.js","mappings":"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","sources":["webpack://Dive/./src/stores/ordersStore.js","webpack://Dive/./src/views/Front/PayView.vue","webpack://Dive/./src/views/Front/PayView.vue?216f"],"sourcesContent":["import { defineStore } from 'pinia';\nimport axios from 'axios';\n\nimport StatusStore from '@/stores/statusStore';\n// 封裝pinia引用避免全域bug\n// import { useRoute } from 'vue-router';\nimport pinia from './store';\n// 這邊就是可能發生的全域bug\n\nconst statusStore = StatusStore(pinia);\n\nexport default defineStore('OrdersStore', {\n  state: () => ({ dataList: {}, searchID: '', show: false, progersNum: 66 }),\n  getters: {\n    // 商品群資料搜尋\n    data: (state) => {\n      if (state.searchID === state.dataList.id) {\n        return state.dataList;\n      }\n      return {};\n    },\n  },\n  actions: {\n    getOrders(id) {\n      statusStore.isLoading = true;\n\n      const Api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${id}`;\n      axios\n        .get(Api)\n        .then((res) => {\n          if (!res.data.order) {\n            this.show = true;\n            this.dataList = {};\n            statusStore.isLoading = false;\n          } else {\n            this.show = false;\n            this.dataList = res.data.order;\n            statusStore.isLoading = false;\n          }\n        })\n        .catch((e) => {\n          console.log(e);\n          statusStore.isLoading = false;\n        });\n    },\n  },\n});\n","<template>\r\n  <div class=\"row justify-content-center\">\r\n    <div class=\"text-center top col-12 col-md-8 mb-3 shadow\">\r\n      <h2>訂單品項</h2>\r\n      <div>\r\n        <table class=\"table\">\r\n          <thead class=\"table-primary\">\r\n            <tr>\r\n              <th scope=\"col\" width=\"33%\">品項</th>\r\n              <th scope=\"col\" width=\"33%\">人數</th>\r\n              <th scope=\"col\" width=\"33%\">金額</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"i in dataList.products\" :key=\"i.id\">\r\n              <th scope=\"row\">{{ i.product.title }}</th>\r\n              <td>{{ i.qty }}</td>\r\n              <td>{{ i.final_total }}</td>\r\n            </tr>\r\n          </tbody>\r\n          <tr>\r\n            <th scope=\"row\"></th>\r\n            <td scope=\"row\">總價:</td>\r\n            <td>{{ dataList.total }}</td>\r\n          </tr>\r\n        </table>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-12 col-md-8 text-center bot mb-3 shadow\">\r\n      <h2>訂單資料</h2>\r\n      <div>\r\n        <table class=\"table table-hover\">\r\n          <thead class=\"table-primary\">\r\n            <tr>\r\n              <th scope=\"col\" width=\"33%\">訂單編號</th>\r\n              <th scope=\"col\" width=\"66%\">{{ dataList.id }}</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody v-if=\"dataList.user\">\r\n            <tr>\r\n              <th scope=\"row\">聯絡人姓名:</th>\r\n              <td>{{ dataList.user.name }}</td>\r\n            </tr>\r\n            <tr>\r\n              <th scope=\"row\">聯絡人電話:</th>\r\n              <td>{{ dataList.user.tel }}</td>\r\n            </tr>\r\n            <tr>\r\n              <th scope=\"row\">聯絡人mail:</th>\r\n              <td>{{ dataList.user.email }}</td>\r\n            </tr>\r\n            <tr>\r\n              <th scope=\"row\">聯絡人地址:</th>\r\n              <td>{{ dataList.user.address }}</td>\r\n            </tr>\r\n            <tr>\r\n              <th scope=\"row\">付款狀態:</th>\r\n              <td>{{ dataList.is_paid }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-8 text-end\">\r\n      <button type=\"button\" class=\"btn btn-outline-titleblue\" @click=\"CheckOut(id)\">\r\n        我要付款\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport OrdersStore from '@/stores/ordersStore';\r\nimport StatusStore from '@/stores/statusStore';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nimport axios from 'axios';\r\nimport { storeToRefs } from 'pinia';\r\n\r\nexport default {\r\n  setup() {\r\n    const Route = useRoute();\r\n    const Router = useRouter();\r\n    const { id } = Route.params;\r\n    const ordersStore = OrdersStore();\r\n    const { getOrders } = ordersStore;\r\n    getOrders(id);\r\n\r\n    const { dataList } = storeToRefs(ordersStore);\r\n\r\n    const CheckOut = (ID) => {\r\n      const Api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${ID}`;\r\n      axios\r\n        .post(Api)\r\n        .then((res) => {\r\n          const statusStore = StatusStore();\r\n          const statusData = {\r\n            content: res.data.message,\r\n          };\r\n          statusStore.pushMessage(statusData);\r\n        })\r\n        .catch((e) => console.log(e));\r\n      Router.push(`/Order/CheckOut/${id}`);\r\n    };\r\n    return { dataList, id, CheckOut, getOrders };\r\n  },\r\n  // data() {\r\n  //   return {\r\n  //     dataList: {},\r\n  //   };\r\n  // },\r\n  methods: {\r\n    // getorder() {\r\n    //   const { id } = this.$route.params;\r\n    //   const Api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${id}`;\r\n    //   this.$http\r\n    //     .get(Api)\r\n    //     .then((res) => {\r\n    //       this.dataList = res.data.order;\r\n    //     })\r\n    //     .catch((e) => {\r\n    //       console.log(e);\r\n    //     });\r\n    // },\r\n    // CheckOut() {\r\n    //   const { id } = this.$route.params;\r\n    //   const Api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${id}`;\r\n    //   this.$http\r\n    //     .post(Api)\r\n    //     .then((res) => {\r\n    //       this.$emitter.emit('push-cart', {\r\n    //         style: 'success',\r\n    //         title: res.data.message,\r\n    //         content: res.data.message,\r\n    //       });\r\n    //     })\r\n    //     .catch((e) => console.log(e));\r\n    //   this.$router.push(`/Order/CheckOut/${id}`);\r\n    // },\r\n  },\r\n  // created() {\r\n  //   this.getOrders(this.id);\r\n  // },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import { render } from \"./PayView.vue?vue&type=template&id=e5aa1e06\"\nimport script from \"./PayView.vue?vue&type=script&lang=js\"\nexport * from \"./PayView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\wei\\\\Desktop\\\\vuecart-master\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["statusStore","StatusStore","pinia","defineStore","state","dataList","searchID","show","progersNum","getters","data","id","actions","getOrders","isLoading","Api","axios","then","res","order","this","catch","e","console","log","class","_createElementVNode","scope","width","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_Fragment","$setup","products","i","key","_hoisted_6","product","title","qty","final_total","_hoisted_7","_hoisted_8","total","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","user","_hoisted_16","name","_hoisted_17","tel","_hoisted_18","email","_hoisted_19","address","_hoisted_20","is_paid","_hoisted_21","type","onClick","setup","Route","useRoute","Router","useRouter","params","ordersStore","OrdersStore","storeToRefs","CheckOut","ID","statusData","content","message","pushMessage","push","methods","__exports__","render"],"sourceRoot":""}