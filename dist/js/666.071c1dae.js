"use strict";(self["webpackChunkDive"]=self["webpackChunkDive"]||[]).push([[666],{1666:function(e,t,a){a.r(t),a.d(t,{default:function(){return dt}});var s=a(3396),l=a(9242),i=a(7139);const d=e=>((0,s.dD)("data-v-9d434c9e"),e=e(),(0,s.Cn)(),e),o={class:"container UserCarts"},n={class:"title mb-5"},r={"aria-label":"breadcrumb"},c={class:"breadcrumb"},u={class:"breadcrumb-item"},m=d((()=>(0,s._)("li",{class:"breadcrumb-item active","aria-current":"page"},"購物車",-1))),b=d((()=>(0,s._)("hr",null,null,-1))),p={class:"position-relative m-4"},h={class:"progress",style:{height:"5px"}},v={key:0,class:"progress-bar bg-titleblue",role:"progressbar",style:{width:"0%"},"aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"},_={key:1,class:"progress-bar bg-titleblue",role:"progressbar",style:{width:"33%"},"aria-valuenow":"33","aria-valuemin":"0","aria-valuemax":"100"},g=(0,s.uE)('<button type="button" class="position-absolute top-0 translate-middle btn btn-primary rounded-pill btnadj" style="left:0;" data-v-9d434c9e><i class="bi bi-cart2" data-v-9d434c9e></i></button><button type="button" class="position-absolute top-0 translate-middle btn btn-primary rounded-pill btnadj" style="left:33%;" data-v-9d434c9e><i class="bi bi-card-checklist" data-v-9d434c9e></i></button><button type="button" class="position-absolute top-0 translate-middle btn btn-primary rounded-pill btnadj" style="will-change:;left:66%;" data-v-9d434c9e><i class="bi bi-cash-coin" data-v-9d434c9e></i></button><button type="button" class="position-absolute top-0 translate-middle btn btn-secondary rounded-pill btnadj" style="left:100%;" data-v-9d434c9e><i class="bi bi-emoji-smile" data-v-9d434c9e></i></button>',4),y={class:"row"},w={class:"col-12 col-sm-8"},f=d((()=>(0,s._)("div",{class:"cartsrwd"},null,-1))),k={class:"col-12 col-md-4"},C={key:0,class:"input-group mt-md-0 mt-3 mb-3 input-group-sm"},x={for:"coupon"},$={class:"input-group-append ms-3"},D=["disabled"],q=d((()=>(0,s._)("span",{class:"mt-3 text-primary"},"迎接假期！輸入： godive ，即享88折優惠！",-1))),V={key:1,class:"col-12 col-md-8 rounded mb-3"},U={class:"accordion w-100",id:"accordionExample"},L={class:"accordion-item"},W=d((()=>(0,s._)("h2",{class:"accordion-header",id:"headingOne"},[(0,s._)("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," 購物車品項 ")],-1))),j={id:"collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},z={class:"accordion-body"},O={class:"col-8"},E={class:"col-4 text-end"},I=d((()=>(0,s._)("hr",null,null,-1))),R={class:"row ms-1 mb-3 pe-2"},F={class:"col-12 col-md-8 border rounded p-0"},H=d((()=>(0,s._)("div",{class:"bg-bgblue rounded-top text-center text-textblue py-3"},[(0,s._)("h3",null,"訂單資料")],-1))),M={class:"text-gray mx-3"},N={class:"text-end"},P={key:0,class:"mx-3"},Y={class:"text-end"},Z={class:"text-danger mx-3"},A={class:"text-end"},K={class:"text-end"},S=["disabled"];function T(e,t,a,d,T,X){const B=(0,s.up)("LoadingView"),G=(0,s.up)("router-link"),J=(0,s.up)("CartsItem"),Q=(0,s.up)("CartsForm");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(B,{active:T.isLoading},null,8,["active"]),(0,s._)("div",o,[(0,s._)("div",n,[(0,s._)("nav",r,[(0,s._)("ol",c,[(0,s._)("li",u,[(0,s.Wm)(G,{class:"text-decoration-none",to:"/home"},{default:(0,s.w5)((()=>[(0,s.Uk)("首頁")])),_:1})]),m])]),b,(0,s._)("div",p,[(0,s._)("div",h,[T.sendData?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",v)),T.sendData?((0,s.wg)(),(0,s.iD)("div",_)):(0,s.kq)("",!0)]),g])]),(0,s._)("div",y,[(0,s._)("div",w,[T.sendData?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(J,{key:0,data:T.carts,onReduceCart:X.reduceCart,onAddCart:X.addCart,onRemoveCart:X.removeCartItem,onDeleCart:X.deleteCart},null,8,["data","onReduceCart","onAddCart","onRemoveCart","onDeleCart"])),f]),(0,s._)("div",k,[T.sendData?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",C,[(0,s._)("label",x,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control mb-3","onUpdate:modelValue":t[0]||(t[0]=e=>T.coupon_code=e),placeholder:"請輸入優惠碼"},null,512),[[l.nr,T.coupon_code]])]),(0,s._)("div",$,[(0,s._)("button",{disabled:T.carts.length<1,class:"btn btn-outline-titleblue",type:"button",onClick:t[1]||(t[1]=(...e)=>X.addCouponCode&&X.addCouponCode(...e))}," 套用優惠碼 ",8,D)]),q])),T.sendData?((0,s.wg)(),(0,s.iD)("div",V,[(0,s._)("div",U,[(0,s._)("div",L,[W,(0,s._)("div",j,[(0,s._)("div",z,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(T.carts,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"row",key:e.id},[(0,s._)("div",O,(0,i.zw)(e.product.title),1),(0,s._)("div",E,"X"+(0,i.zw)(e.qty),1),I])))),128))])])])])])):(0,s.kq)("",!0),(0,s._)("div",R,[(0,s._)("div",F,[H,(0,s._)("div",M,[(0,s.Uk)(" 商品金額: "),(0,s._)("p",N,"$"+(0,i.zw)(this.$filters.currency(T.price.total)),1)]),T.price.total!=T.price.final_total?((0,s.wg)(),(0,s.iD)("div",P,[(0,s.Uk)(" 折扣金額: "),(0,s._)("p",Y,"$"+(0,i.zw)(this.$filters.currency(T.price.total-T.price.final_total)),1)])):(0,s.kq)("",!0),(0,s._)("div",Z,[(0,s.Uk)(" 總金額: "),(0,s._)("p",A,"$"+(0,i.zw)(this.$filters.currency(T.price.final_total)),1)]),(0,s._)("div",K,[T.sendData?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-outline-titleblue m-3",type:"button",disabled:T.carts.length<1,onClick:t[2]||(t[2]=e=>T.sendData=!0)}," 送出資料 ",8,S))])])]),T.isMounted?((0,s.wg)(),(0,s.j4)(s.lR,{key:2,to:".cartsrwd",class:"imgtp",disabled:T.isDisabled},[T.sendData?((0,s.wg)(),(0,s.j4)(Q,{key:0})):(0,s.kq)("",!0)],8,["disabled"])):(0,s.kq)("",!0)])])])],64)}const X={class:"row"},B={class:"border"},G={key:0,class:"container mt-4"},J={class:"table table-hover align-middle align-middle"},Q=(0,s._)("thead",null,[(0,s._)("tr",{class:"align-middle text-sm text-gray-400"},[(0,s._)("th",{scope:"col",style:{width:"52%"}},"購物車"),(0,s._)("th",{scope:"col",class:"d-none d-md-table-cell",style:{width:"23%"}},"人數"),(0,s._)("th",{scope:"col",class:"d-none d-md-table-cell",style:{width:"15%"}},"總計"),(0,s._)("th",{scope:"col",class:"d-none d-md-table-cell text-center",style:{width:"10%"}}," 刪除 ")])],-1),ee={class:"d-flex align-items-center flex-column flex-sm-row"},te={class:"d-md-none p-2"},ae=["onClick"],se=(0,s._)("i",{class:"bi bi-trash"},null,-1),le=[se],ie=["src","alt","title"],de={class:"text-start py-4"},oe={class:"h5 fw-bolder"},ne={class:"d-md-none"},re={class:"py-2"},ce={class:"input-group"},ue=["onClick","disabled"],me=(0,s._)("i",{class:"bi bi-dash"},null,-1),be=[me],pe=["onUpdate:modelValue"],he=["onClick","disabled"],ve=(0,s._)("i",{class:"bi bi-plus"},null,-1),_e=[ve],ge={class:"d-none d-md-table-cell text-end align-middle"},ye={class:"input-group"},we=["onClick","disabled"],fe=(0,s._)("i",{class:"bi bi-dash"},null,-1),ke=[fe],Ce=["onUpdate:modelValue"],xe=["onClick","disabled"],$e=(0,s._)("i",{class:"bi bi-plus"},null,-1),De=[$e],qe={class:"d-none d-md-table-cell text-end h5"},Ve={class:"d-none d-md-table-cell text-end"},Ue=["onClick"],Le=(0,s._)("i",{class:"bi bi-trash"},null,-1),We=[Le],je={key:1,class:"container-fluid mt-4"},ze={class:"text-center"},Oe=(0,s._)("i",{class:"bi bi-cart4 display-1 fw-bold text-dark"},null,-1),Ee=(0,s._)("h3",{class:"p-3"},"目前購物車還沒有商品唷",-1);function Ie(e,t,a,d,o,n){const r=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("button",{class:"btn btn-outline-titleblue mb-3",type:"button",onClick:t[0]||(t[0]=t=>e.$emit("deleCart"))}," 清空資料 "),(0,s._)("div",X,[(0,s._)("div",B,[o.carts.length>0?((0,s.wg)(),(0,s.iD)("div",G,[(0,s._)("table",J,[Q,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",ee,[(0,s._)("div",te,[(0,s._)("button",{type:"button",class:"btn d-md-block mx-auto btnClose",onClick:a=>e.$emit("removeCart",t.id)},le,8,ae)]),(0,s._)("img",{class:"productImg w-50 p-1",src:t.product.imageUrl,alt:t.product.title,title:t.product.title},null,8,ie),(0,s._)("div",de,[(0,s._)("div",oe,(0,i.zw)(t.product.title),1),(0,s._)("div",ne,[(0,s._)("div",re,"NT$"+(0,i.zw)(e.$filters.currency(t.total)),1),(0,s._)("div",ce,[(0,s._)("button",{type:"button",class:"btn btn-outline-dark",onClick:a=>e.$emit("reduceCart",t),disabled:1==t.qty},be,8,ue),(0,s.wy)((0,s._)("input",{id:"num1",type:"text",min:"1","onUpdate:modelValue":e=>t.qty=e,class:"form-control text-center border-dark bg-transparent",readonly:""},null,8,pe),[[l.nr,t.qty,void 0,{number:!0}]]),(0,s._)("button",{type:"button",class:"btn btn-outline-dark",onClick:a=>e.$emit("addCart",t),disabled:4==t.qty},_e,8,he)])])])]),(0,s._)("td",ge,[(0,s._)("div",ye,[(0,s._)("button",{type:"button",class:"btn btn-outline-dark",onClick:a=>e.$emit("reduceCart",t),disabled:1==t.qty},ke,8,we),(0,s.wy)((0,s._)("input",{id:"num",type:"text",min:"1","onUpdate:modelValue":e=>t.qty=e,class:"form-control form-control-sm text-center border-dark",readonly:""},null,8,Ce),[[l.nr,t.qty,void 0,{number:!0}]]),(0,s._)("button",{type:"button",class:"btn btn-outline-dark",onClick:a=>e.$emit("addCart",t),disabled:4===t.qty},De,8,xe)])]),(0,s._)("td",qe," NT$"+(0,i.zw)(e.$filters.currency(t.total)),1),(0,s._)("td",Ve,[(0,s._)("button",{type:"button",class:"btn d-md-block mx-auto btnClose",onClick:a=>e.$emit("removeCart",t.id)},We,8,Ue)])])))),128))])])])):((0,s.wg)(),(0,s.iD)("div",je,[(0,s._)("div",ze,[Oe,Ee,(0,s.Wm)(r,{to:"/UserProducts",class:"btn btn-outline-titleblue btn-lg mb-5"},{default:(0,s.w5)((()=>[(0,s.Uk)("選購商品")])),_:1})])]))])])],64)}var Re={data(){return{carts:[]}},props:{data:{type:Object},default(){return{}}},emits:["deleCart","addCart","removeCart","reduceCart"],watch:{data(){this.carts=this.data}}},Fe=a(89);const He=(0,Fe.Z)(Re,[["render",Ie]]);var Me=He;const Ne={class:"row justify-content-center p-md-0 p-3"},Pe=(0,s._)("h3",{class:"text-center fs-3"},"顧客聯絡資料",-1),Ye={class:"my-3"},Ze=(0,s._)("label",{for:"name",class:"form-label"},"聯絡人姓名",-1),Ae={class:"mb-3"},Ke=(0,s._)("label",{for:"email",class:"form-label"},"聯絡人Email",-1),Se={class:"mb-3"},Te=(0,s._)("label",{for:"tel",class:"form-label"},"聯絡人電話",-1),Xe={class:"mb-3"},Be=(0,s._)("label",{for:"address",class:"form-label"},"聯絡人地址",-1),Ge={class:"mb-3"},Je=(0,s._)("label",{for:"message",class:"form-label"},"留言",-1),Qe=(0,s._)("div",{class:"text-end mb-3"},[(0,s._)("button",{class:"btn btn-danger"},"送出資料")],-1);function et(e,t,a,d,o,n){const r=(0,s.up)("FieldView"),c=(0,s.up)("ErrorMessage"),u=(0,s.up)("FormView");return(0,s.wg)(),(0,s.iD)("div",Ne,[Pe,(0,s.Wm)(u,{class:"col-md-10 bg-titleblue rounded my-3 text-warning",onSubmit:n.createOrder},{default:(0,s.w5)((({errors:e})=>[(0,s._)("div",Ye,[Ze,(0,s.Wm)(r,{id:"name",name:"姓名",type:"text",class:(0,i.C_)(["form-control",{"is-invalid":e["姓名"],"is-valid":!e[0]&&""!=o.form.user.name}]),placeholder:"請輸入聯絡人姓名",rules:n.isName,modelValue:o.form.user.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.form.user.name=e)},null,8,["class","rules","modelValue"]),(0,s.Wm)(c,{name:"姓名",class:"invalid-feedback"})]),(0,s._)("div",Ae,[Ke,(0,s.Wm)(r,{id:"email",name:"email",type:"email",class:(0,i.C_)(["form-control",{"is-invalid":e["email"],"is-valid":!e[0]&&""!=o.form.user.email}]),placeholder:"請輸入聯絡人Email",rules:"email|required",modelValue:o.form.user.email,"onUpdate:modelValue":t[1]||(t[1]=e=>o.form.user.email=e)},null,8,["class","modelValue"]),(0,s.Wm)(c,{name:"email",class:"invalid-feedback"})]),(0,s._)("div",Se,[Te,(0,s.Wm)(r,{id:"tel",name:"電話",type:"tel",class:(0,i.C_)(["form-control",{"is-invalid":e["電話"],"is-valid":!e[0]&&""!=o.form.user.tel}]),placeholder:"請輸入聯絡人電話",rules:n.isPhone,modelValue:o.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=e=>o.form.user.tel=e)},null,8,["class","rules","modelValue"]),(0,s.Wm)(c,{name:"電話",class:"invalid-feedback"})]),(0,s._)("div",Xe,[Be,(0,s.Wm)(r,{id:"address",name:"地址",type:"text",class:(0,i.C_)(["form-control",{"is-invalid":e["地址"],"is-valid":!e[0]&&""!=o.form.user.address}]),placeholder:"請輸入聯絡人地址",rules:"required",modelValue:o.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=e=>o.form.user.address=e)},null,8,["class","modelValue"]),(0,s.Wm)(c,{name:"地址",class:"invalid-feedback"})]),(0,s._)("div",Ge,[Je,(0,s.wy)((0,s._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=e=>o.form.message=e)},null,512),[[l.nr,o.form.message]])]),Qe])),_:1},8,["onSubmit"])])}a(7658);var tt={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{isName(e){const t=/^[\u4e00-\u9fa5A-Za-z]{0,}$/;return""===this.form.user.name?"姓名為必填":!!t.test(e)||"需要中文或英文姓名"},isPhone(e){const t=/^(09)[0-9]{8}$/;return""===this.form.user.tel?"電話為必填":!!t.test(e)||"需要正確的電話號碼"},createOrder(){const e="https://vue3-course-api.hexschool.io/api/waynechendive-api/order",t=this.form;this.$http.post(e,{data:t}).then((e=>{this.$emitter.emit("push-cart",{style:"success",title:e.data.message,content:e.data.message}),this.$router.push(`/Order/PayView/${e.data.orderId}`)}))}}};const at=(0,Fe.Z)(tt,[["render",et]]);var st=at,lt={data(){return{carts:[],price:{},coupon_code:"",sendData:!1,isload:!1,isLoading:!1,isMounted:!1,isDisabled:!1}},components:{CartsItem:Me,CartsForm:st},mounted(){this.isMounted=!0,window.innerWidth<430&&(this.isDisabled=!0),window.addEventListener("resize",(()=>{console.log(window.screen.width),window.innerWidth<430?this.isDisabled=!0:this.isDisabled=!1})),this.$emitter.on("push-cart",(()=>{this.getusercarts()}))},methods:{reduceCart(e){this.isLoad=!0;const t=`https://vue3-course-api.hexschool.io/api/waynechendive-api/cart/${e.id}`,a={product_id:e.product_id,qty:e.qty-1};this.$http.put(t,{data:a}).then((e=>{this.$emitter.emit("push-cart",{style:"warning",title:e.data.message,content:e.data.message}),console.log(e),this.isLoad=!1,this.getusercarts()}))},addCart(e){this.isLoad=!0;const t=`https://vue3-course-api.hexschool.io/api/waynechendive-api/cart/${e.id}`,a={product_id:e.product_id,qty:e.qty+1};this.$http.put(t,{data:a}).then((e=>{this.$emitter.emit("push-cart",{style:"success",title:e.data.message,content:e.data.message}),console.log(e),this.isLoad=!1,this.getusercarts()}))},removeCartItem(e){const t=`https://vue3-course-api.hexschool.io/api/waynechendive-api/cart/${e}`;this.$http.delete(t).then((e=>{this.$emitter.emit("push-cart",{style:"warning",title:e.data.message,content:e.data.message}),this.getusercarts()}))},deleteCart(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/waynechendive-api/carts";this.$http.delete(e).then((e=>{this.isLoading=!1,this.$emitter.emit("push-cart",{style:"danger",title:e.data.message,content:e.data.message}),this.getusercarts()}))},addCouponCode(){const e="https://vue3-course-api.hexschool.io/api/waynechendive-api/coupon",t={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:t}).then((e=>{this.$emitter.emit("push-cart",{style:"info",title:e.data.message,content:e.data.message}),this.getusercarts(),this.isLoading=!1}))},getusercarts(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/waynechendive-api/cart";this.$http.get(e).then((e=>{this.price=e.data.data,this.carts=e.data.data.carts,this.isLoading=!1})).catch((e=>{console.log(e)}))}},created(){this.getusercarts()}};const it=(0,Fe.Z)(lt,[["render",T],["__scopeId","data-v-9d434c9e"]]);var dt=it}}]);
//# sourceMappingURL=666.071c1dae.js.map